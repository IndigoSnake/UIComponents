(function($){var defaults={sections:"section",easing:"ease",time:1e3,beforeMoveFunc:null,afterMoveFunc:null,isCyclic:false,isVertical:true,sectionsControl:null,captureKeyboard:false,captureTouch:false};$.fn.UIPageScrolling=function(settings){var options=$.extend({},defaults,settings),index=0,current=$(this),maxIndex=0,lockNext=false,lockPrev=false;function unbindMouseEvents(){current.unbind("mousemove").unbind("mouseup").bind("mousedown",mouseDownEvent)}function mouseDownEvent(){var lastClient=-1;current.bind("mousemove",function(e){var delta;if(lastClient==-1){lastClient=options.isVertical?e.clientY:e.clientX}delta=lastClient-(options.isVertical?e.clientY:e.clientX);if(delta>150){moveNext()}if(delta<-150){movePrevious()}}).bind("mouseup",unbindMouseEvents).unbind("mousedown")}function touchStartEvent(e){e=window.event||e.originalEvent;var lastClient=options.isVertical?e.touches[0].pageY:e.touches[0].pageX;current.bind("touchmove",function(e){e=window.event||e.originalEvent;var delta=lastClient-(options.isVertical?e.touches[0].pageY:e.touches[0].pageX);if(delta>=50){moveNext()}if(delta<=-50){movePrevious()}if(Math.abs(delta)>=50){current.unbind("touchmove")}})}function moveTo(index){current.transformPageTo(index*100,options,index)}function moveNext(){if(lockNext)return;var lastIndex=$(".ui-page-scrolling-section_active").attr("data-index");lastIndex++;if(lastIndex>maxIndex&&options.isCyclic)lastIndex=0;if(lastIndex<=maxIndex){lockNext=true;lockPrev=false;moveTo(lastIndex)}}function movePrevious(){if(lockPrev)return;var lastIndex=$(".ui-page-scrolling-section_active").attr("data-index");lastIndex--;if(lastIndex<0&&options.isCyclic)lastIndex=maxIndex;if(lastIndex>=0){lockNext=false;lockPrev=true;moveTo(lastIndex)}}function processKeyEvent(e){switch(e.keyCode){case 38:case 37:case 33:movePrevious();break;case 40:case 39:case 34:moveNext();break}}function processMouseWheel(e){var event=window.event||e.originalEvent,delta=event.wheelDelta||-120*event.detail,topDelta=200;if(event.wheelDelta)topDelta=10;if(delta<-topDelta)moveNext();if(delta>topDelta)movePrevious()}options.lockManager=function(){lockNext=false;lockPrev=false};current.children(options.sections).addClass("ui-page-scrolling-section").each(function(){if(options.isVertical){$(this).css({top:index*100+"%"})}else{$(this).css({left:index*100+"%"})}$(this).attr("data-index",index++)});maxIndex=index-1;index=0;if(options.sectionsControl){$(options.sectionsControl).addClass("ui-page-scrolling-control").each(function(){$(this).attr("data-index",index++).bind("click keypress",function(){moveTo($(this).attr("data-index"))})})}if(options.captureTouch){current.bind("mousedown",mouseDownEvent);current.bind("touchstart",touchStartEvent)}current.addClass("ui-page-scrolling-main").transformPageTo(0,options,0).bind("mousewheel DOMMouseScroll",processMouseWheel);if(options.captureKeyboard){$(window).bind("keydown",processKeyEvent)}return $(this)};$.fn.transformPageTo=function(position,options,index){var positionX=0,positionY=0;$(".ui-page-scrolling-section_active").removeClass("ui-page-scrolling-section_active");$(".ui-page-scrolling-control_active").removeClass("ui-page-scrolling-control_active");$(".ui-page-scrolling-control[data-index="+index+"]").addClass("ui-page-scrolling-control_active");$(".ui-page-scrolling-section[data-index="+index+"]").addClass("ui-page-scrolling-section_active");if(options.beforeMoveFunc instanceof Function)options.beforeMoveFunc(index);if(position>0){position=-position}if(options.isVertical){positionY=position}else{positionX=position}$(this).css({"-webkit-transform":"translate3d("+positionX+"%, "+positionY+"%, 0)","-webkit-transition":"all "+options.time+"ms "+options.easing,"-moz-transform":"translate3d("+positionX+"%, "+positionY+"%, 0)","-moz-transition":"all "+options.time+"ms "+options.easing,"-ms-transform":"translate3d("+positionX+"%, "+positionY+"%, 0)","-ms-transition":"all "+options.time+"ms "+options.easing,transform:"translate3d("+positionX+"%, "+positionY+"%, 0)",transition:"all "+options.time+"ms "+options.easing}).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){options.lockManager();if(options.afterMoveFunc instanceof Function)options.afterMoveFunc(index)});return $(this)}})(window.jQuery);